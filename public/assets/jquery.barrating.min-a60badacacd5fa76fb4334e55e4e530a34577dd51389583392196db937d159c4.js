!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=function(){function t(){var t=this,n=function(){var n=[t.options.wrapperClass];""!==t.options.theme&&n.push("br-theme-"+t.options.theme),t.$elem.wrap(e("<div />",{"class":n.join(" ")}))},i=function(){t.$elem.unwrap()},r=function(){var n;return n=t.options.initialRating?e('option[value="'+t.options.initialRating+'"]',t.$elem):e("option:selected",t.$elem)},o=function(e){var n=t.$elem.data("barrating");return"undefined"!=typeof e?n[e]:n},s=function(e,n){null!==n&&"object"==typeof n?t.$elem.data("barrating",n):t.$elem.data("barrating")[e]=n},a=function(){var e=r();s(null,{userOptions:t.options,ratingValue:e.val(),ratingText:e.data("html")?e.data("html"):e.text(),originalRatingValue:e.val(),originalRatingText:e.data("html")?e.data("html"):e.text(),readOnly:t.options.readonly,deselectable:t.$elem.find("option:first").val()?!1:!0})},l=function(){t.$elem.removeData("barrating")},u=function(){return o("ratingText")},c=function(){return o("ratingValue")},d=function(){var n=e("<div />",{"class":"br-widget"});return t.$elem.find("option").each(function(){var i,r,o,s;i=e(this).val(),i&&(r=e(this).text(),o=e(this).data("html"),o&&(r=o),s=e("<a />",{href:"#","data-rating-value":i,"data-rating-text":r,html:t.options.showValues?r:""}),n.append(s))}),t.options.showSelectedRating&&n.append(e("<div />",{text:"","class":"br-current-rating"})),t.options.reverse&&n.addClass("br-reverse"),t.options.readonly&&n.addClass("br-readonly"),n},f=function(){return t.options.reverse?"nextAll":"prevAll"},p=function(e){t.$elem.find('option[value="'+e+'"]').prop("selected",!0),t.$elem.change()},h=function(e){e=e?e:u(),t.options.showSelectedRating&&t.$elem.parent().find(".br-current-rating").text(e)},g=function(){t.$widget.find("a").removeClass("br-selected br-current"),t.$widget.find('a[data-rating-value="'+c()+'"]').addClass("br-selected br-current")[f()]().addClass("br-selected")},v=function(e){return e.hasClass("br-current")&&o("deselectable")},m=function(n){n.on("click.barrating",function(i){var r,o,a=e(this);return i.preventDefault(),n.removeClass("br-active br-selected"),a.addClass("br-selected")[f()]().addClass("br-selected"),r=a.attr("data-rating-value"),o=a.attr("data-rating-text"),v(a)?(a.removeClass("br-selected br-current")[f()]().removeClass("br-selected br-current"),r="",o=""):(n.removeClass("br-current"),a.addClass("br-current")),s("ratingValue",r),s("ratingText",o),p(r),h(o),t.options.onSelect.call(t,c(),u(),i),!1})},y=function(t){t.on("mouseenter.barrating",function(){var n=e(this);t.removeClass("br-active br-selected"),n.addClass("br-active")[f()]().addClass("br-active"),h(n.attr("data-rating-text"))})},x=function(e){t.$widget.on("mouseleave.barrating",function(){e.removeClass("br-active"),h(),g()})},b=function(t){t.on("touchstart.barrating",function(t){t.preventDefault(),t.stopPropagation(),e(this).click()})},w=function(e){e.on("click.barrating",function(e){e.preventDefault()})},T=function(e){m(e),t.options.hoverState&&(y(e),x(e))},S=function(e){e.off(".barrating")},C=function(e){$elements=t.$widget.find("a"),b&&b($elements),e?(S($elements),w($elements)):T($elements)};this.show=function(){o()||(n(),a(),t.$widget=d(),t.$widget.insertAfter(t.$elem),g(),h(),C(t.options.readonly),t.$elem.hide())},this.readonly=function(e){"boolean"==typeof e&&o("readOnly")!=e&&(C(e),s("readOnly",e),t.$widget.toggleClass("br-readonly"))},this.set=function(e){var n=o("userOptions");t.$elem.find('option[value="'+e+'"]').val()&&(s("ratingValue",e),s("ratingText",t.$elem.find('option[value="'+e+'"]').text()),p(c()),h(u()),g(),n.silent||n.onSelect.call(this,c(),u()))},this.clear=function(){var e=o("userOptions");s("ratingValue",o("originalRatingValue")),s("ratingText",o("originalRatingText")),p(c()),h(u()),g(),e.onClear.call(this,c(),u())},this.destroy=function(){var e=c(),n=u(),r=o("userOptions");S(t.$widget.find("a")),t.$widget.remove(),l(),i(),t.$elem.show(),r.onDestroy.call(this,e,n)}}return t.prototype.init=function(t,n){return this.$elem=e(n),this.options=e.extend({},e.fn.barrating.defaults,t),this.options},t}();e.fn.barrating=function(n,i){return this.each(function(){var r=new t;if(e(this).is("select")||e.error("Sorry, this plugin only works with select fields."),r.hasOwnProperty(n)){if(r.init(i,this),"show"===n)return r.show(i);if(r.$elem.data("barrating"))return r.$widget=e(this).next(".br-widget"),r[n](i)}else{if("object"==typeof n||!n)return i=n,r.init(i,this),r.show();e.error("Method "+n+" does not exist on jQuery.barrating")}})},e.fn.barrating.defaults={theme:"",initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,wrapperClass:"br-wrapper",onSelect:function(e,t,n){},onClear:function(e,t){},onDestroy:function(e,t){}},e.fn.barrating.BarRating=t});