!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=function(){function e(){var e=this,i=function(){var i=[e.options.wrapperClass];""!==e.options.theme&&i.push("br-theme-"+e.options.theme),e.$elem.wrap(t("<div />",{"class":i.join(" ")}))},n=function(){e.$elem.unwrap()},s=function(){var i;return i=e.options.initialRating?t('option[value="'+e.options.initialRating+'"]',e.$elem):t("option:selected",e.$elem)},o=function(t){var i=e.$elem.data("barrating");return"undefined"!=typeof t?i[t]:i},r=function(t,i){null!==i&&"object"==typeof i?e.$elem.data("barrating",i):e.$elem.data("barrating")[t]=i},a=function(){var t=s();r(null,{userOptions:e.options,ratingValue:t.val(),ratingText:t.data("html")?t.data("html"):t.text(),originalRatingValue:t.val(),originalRatingText:t.data("html")?t.data("html"):t.text(),readOnly:e.options.readonly,deselectable:e.$elem.find("option:first").val()?!1:!0})},l=function(){e.$elem.removeData("barrating")},d=function(){return o("ratingText")},c=function(){return o("ratingValue")},g=function(){var i=t("<div />",{"class":"br-widget"});return e.$elem.find("option").each(function(){var n,s,o,r;n=t(this).val(),n&&(s=t(this).text(),o=t(this).data("html"),o&&(s=o),r=t("<a />",{href:"#","data-rating-value":n,"data-rating-text":s,html:e.options.showValues?s:""}),i.append(r))}),e.options.showSelectedRating&&i.append(t("<div />",{text:"","class":"br-current-rating"})),e.options.reverse&&i.addClass("br-reverse"),e.options.readonly&&i.addClass("br-readonly"),i},u=function(){return e.options.reverse?"nextAll":"prevAll"},h=function(t){e.$elem.find('option[value="'+t+'"]').prop("selected",!0),e.$elem.change()},p=function(t){t=t?t:d(),e.options.showSelectedRating&&e.$elem.parent().find(".br-current-rating").text(t)},v=function(){e.$widget.find("a").removeClass("br-selected br-current"),e.$widget.find('a[data-rating-value="'+c()+'"]').addClass("br-selected br-current")[u()]().addClass("br-selected")},f=function(t){return t.hasClass("br-current")&&o("deselectable")},m=function(i){i.on("click.barrating",function(n){var s,o,a=t(this);return n.preventDefault(),i.removeClass("br-active br-selected"),a.addClass("br-selected")[u()]().addClass("br-selected"),s=a.attr("data-rating-value"),o=a.attr("data-rating-text"),f(a)?(a.removeClass("br-selected br-current")[u()]().removeClass("br-selected br-current"),s="",o=""):(i.removeClass("br-current"),a.addClass("br-current")),r("ratingValue",s),r("ratingText",o),h(s),p(o),e.options.onSelect.call(e,c(),d(),n),!1})},x=function(e){e.on("mouseenter.barrating",function(){var i=t(this);e.removeClass("br-active br-selected"),i.addClass("br-active")[u()]().addClass("br-active"),p(i.attr("data-rating-text"))})},S=function(t){e.$widget.on("mouseleave.barrating",function(){t.removeClass("br-active"),p(),v()})},b=function(e){e.on("touchstart.barrating",function(e){e.preventDefault(),e.stopPropagation(),t(this).click()})},w=function(t){t.on("click.barrating",function(t){t.preventDefault()})},C=function(t){m(t),e.options.hoverState&&(x(t),S(t))},T=function(t){t.off(".barrating")},y=function(t){$elements=e.$widget.find("a"),b&&b($elements),t?(T($elements),w($elements)):C($elements)};this.show=function(){o()||(i(),a(),e.$widget=g(),e.$widget.insertAfter(e.$elem),v(),p(),y(e.options.readonly),e.$elem.hide())},this.readonly=function(t){"boolean"==typeof t&&o("readOnly")!=t&&(y(t),r("readOnly",t),e.$widget.toggleClass("br-readonly"))},this.set=function(t){var i=o("userOptions");e.$elem.find('option[value="'+t+'"]').val()&&(r("ratingValue",t),r("ratingText",e.$elem.find('option[value="'+t+'"]').text()),h(c()),p(d()),v(),i.silent||i.onSelect.call(this,c(),d()))},this.clear=function(){var t=o("userOptions");r("ratingValue",o("originalRatingValue")),r("ratingText",o("originalRatingText")),h(c()),p(d()),v(),t.onClear.call(this,c(),d())},this.destroy=function(){var t=c(),i=d(),s=o("userOptions");T(e.$widget.find("a")),e.$widget.remove(),l(),n(),e.$elem.show(),s.onDestroy.call(this,t,i)}}return e.prototype.init=function(e,i){return this.$elem=t(i),this.options=t.extend({},t.fn.barrating.defaults,e),this.options},e}();t.fn.barrating=function(i,n){return this.each(function(){var s=new e;if(t(this).is("select")||t.error("Sorry, this plugin only works with select fields."),s.hasOwnProperty(i)){if(s.init(n,this),"show"===i)return s.show(n);if(s.$elem.data("barrating"))return s.$widget=t(this).next(".br-widget"),s[i](n)}else{if("object"==typeof i||!i)return n=i,s.init(n,this),s.show();t.error("Method "+i+" does not exist on jQuery.barrating")}})},t.fn.barrating.defaults={theme:"",initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,wrapperClass:"br-wrapper",onSelect:function(t,e,i){},onClear:function(t,e){},onDestroy:function(t,e){}},t.fn.barrating.BarRating=e});